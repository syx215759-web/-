<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<title>ä¸­é«˜å¹´ç´šé–±è®€ / è½åŠ›ææ–™</title>

<style>
body {
  font-family: "Noto Sans TC", Arial, sans-serif;
  margin: 0;
  padding: 16px;
  background: #f5f7fb;
}

/* ================= æœå°‹å€ ================= */

.search-wrapper {
  display: flex;
  justify-content: center;
  margin-bottom: 20px;
}

.search-container {
  background: #f7f9fc;
  padding: 16px 20px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.06);
  max-width: 760px;
  width: 100%;
}

.search-title {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 12px;
}

.search-bar {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.search-input-wrapper {
  display: flex;
  align-items: center;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 0 6px;
  background: #fff;
  height: 36px;
}

.search-input-wrapper input {
  border: none;
  outline: none;
  font-size: 14px;
  width: 200px;
}

.search-icon-btn {
  border: none;
  background: none;
  cursor: pointer;
  font-size: 16px;
}

/* ================= å¡ç‰‡ ================= */

#lesson-list {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
  justify-content: center;
}

.lesson-card {
  width: 220px;
  background: #fff;
  border-radius: 12px;
  padding: 14px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.06);
  display: flex;
  flex-direction: column;
}

.lesson-icon {
  height: 80px;
  border-radius: 8px;
  background: #eef2f8;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  margin-bottom: 10px;
}

.lesson-title {
  font-size: 15px;
  font-weight: 700;
}

.lesson-meta {
  font-size: 13px;
  color: #666;
  margin-bottom: 10px;
}

.lesson-actions {
  margin-top: auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.like-btn {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 14px;
  color: #555;
}

.like-btn.liked {
  color: #e63946;
}

/* ================= åˆ†é  ================= */

.pagination {
  margin-top: 32px;
  display: flex;
  justify-content: center;
  gap: 8px;
}

.page-btn {
  border: 1px solid #ccc;
  background: #fff;
  padding: 6px 10px;
  border-radius: 6px;
  cursor: pointer;
}

.page-btn.active {
  background: #3b6cff;
  color: #fff;
  border-color: #3b6cff;
}

/* ================= Modal ================= */

.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  justify-content: center;
  align-items: center;
  z-index: 999;
}

.modal-content {
  background: #fff;
  width: 90%;
  max-width: 520px;
  border-radius: 14px;
  padding: 22px;
  position: relative;
  max-height: 80vh;
  overflow-y: auto;
}

.close-btn {
  position: absolute;
  top: 10px;
  right: 14px;
  font-size: 22px;
  cursor: pointer;
}

.modal h2 {
  font-size: 18px;
  margin-bottom: 4px;
}

.modal-meta {
  font-size: 13px;
  color: #666;
  margin-bottom: 16px;
}

.modal-section {
  margin-bottom: 18px;
}

.modal-section h4 {
  font-size: 14px;
  margin-bottom: 6px;
}

.modal-section ul {
  padding-left: 18px;
  margin: 0;
  font-size: 14px;
}

.read-btn {
  width: 100%;
  margin-top: 10px;
  padding: 10px;
  background: #3b6cff;
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}
</style>
</head>

<body>

<h2 style="text-align:center;">ä¸­é«˜å¹´ç´šé–±è®€ / è½åŠ›ææ–™</h2>

<!-- æœå°‹å€ -->
<div class="search-wrapper">
  <div class="search-container">
    <div class="search-title">æœå°‹æ•™æ</div>
    <div class="search-bar">
      <div class="search-input-wrapper">
        <input id="keyword" placeholder="è¼¸å…¥æ¨™é¡Œé—œéµå­—"
          onkeydown="if(event.key==='Enter') handleSearch()" />
        <button class="search-icon-btn" onclick="handleSearch()">ğŸ”</button>
      </div>
    </div>
  </div>
</div>

<!-- å¡ç‰‡åˆ—è¡¨ -->
<div id="lesson-list"></div>
<div id="pagination" class="pagination"></div>

<!-- é è¦½ Modal -->
<div id="previewModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closePreview()">Ã—</span>
    <h2 id="modalTitle"></h2>
    <div class="modal-meta" id="modalMeta"></div>

    <div class="modal-section">
      <h4>æš–èº«å•é¡Œ</h4>
      <ul id="modalWarmup"></ul>
    </div>
    <div class="modal-section">
      <h4>é–±è®€ç†è§£</h4>
      <ul id="modalReading"></ul>
    </div>
    <div class="modal-section">
      <h4>è¨è«–å•é¡Œ</h4>
      <ul id="modalDiscussion"></ul>
    </div>
    <div class="modal-section">
      <h4>ç”Ÿè©ï¼ˆå‰ 10ï¼‰</h4>
      <ul id="modalVocab"></ul>
    </div>

    <button class="read-btn" id="readFullBtn">é–±è®€å…¨æ–‡</button>
  </div>
</div>

<script>
/* ===== è³‡æ–™ ===== */
const lessons = [
  {
    title: "åŸå¸‚æ–‡åŒ–èˆ‡ç”Ÿæ´»",
    meta: "ç¤¾æœƒ / æ–‡åŒ– Â· 800â€“1000 å­—",
    icon: "ğŸ“˜",
    fullUrl: "https://example.com/lesson1.pdf",
    warmup: ["ä½ æœ€å–œæ­¡åŸå¸‚çš„å“ªå€‹éƒ¨åˆ†ï¼Ÿ"],
    reading: ["ä½œè€…å¦‚ä½•æè¿°åŸå¸‚æ–‡åŒ–ï¼Ÿ"],
    discussion: ["åŸå¸‚ç”Ÿæ´»æœ€å¤§çš„æŒ‘æˆ°æ˜¯ä»€éº¼ï¼Ÿ"],
    vocab: ["urban","culture","community","identity","tradition"]
  },
  {
    title: "åœ‹éš›æ–°èè½åŠ›ç·´ç¿’",
    meta: "åœ‹éš› / è»äº‹ Â· 1000â€“1200 å­—",
    icon: "ğŸ§",
    fullUrl: "https://example.com/lesson2.pdf",
    warmup: ["ä½ å¾å“ªè£¡ç²å¾—åœ‹éš›æ–°èï¼Ÿ"],
    reading: ["æ–°èä¸»é¡Œæ˜¯ä»€éº¼ï¼Ÿ"],
    discussion: ["åª’é«”æ˜¯å¦å½±éŸ¿è§€é»ï¼Ÿ"],
    vocab: ["global","conflict","policy","summit","broadcast"]
  }
];

let filteredLessons = lessons;
const pageSize = 12;
let currentPage = 1;

/* ===== æ„›å¿ƒï¼ˆç´¯ç©ï¼‰ ===== */
function getLikeCount(id) {
  return Number(localStorage.getItem("like-count-" + id)) || 0;
}
function hasLiked(id) {
  return localStorage.getItem("liked-" + id) === "1";
}
function toggleLike(id, btn) {
  if (hasLiked(id)) return;
  const count = getLikeCount(id) + 1;
  localStorage.setItem("like-count-" + id, count);
  localStorage.setItem("liked-" + id, "1");
  btn.classList.add("liked");
  btn.innerHTML = `â™¥ <span>${count}</span>`;
}

/* ===== æœå°‹ ===== */
function handleSearch() {
  const keyword = document.getElementById("keyword").value.trim();
  filteredLessons = lessons.filter(l =>
    keyword === "" || l.title.includes(keyword)
  );
  currentPage = 1;
  render();
}

/* ===== ä¸»æµç¨‹ ===== */
function render() {
  const start = (currentPage - 1) * pageSize;
  const data = filteredLessons.slice(start, start + pageSize);
  const list = document.getElementById("lesson-list");
  list.innerHTML = "";

  data.forEach((l, i) => {
    const id = lessons.indexOf(l);
    const count = getLikeCount(id);
    const liked = hasLiked(id);

    list.innerHTML += `
      <div class="lesson-card">
        <div class="lesson-icon">${l.icon}</div>
        <div class="lesson-title">${l.title}</div>
        <div class="lesson-meta">${l.meta}</div>
        <div class="lesson-actions">
          <button class="like-btn ${liked ? "liked" : ""}"
            onclick="toggleLike(${id}, this)">
            ${liked ? "â™¥" : "â™¡"} <span>${count}</span>
          </button>
          <button onclick="openPreview(${id})">é è¦½</button>
        </div>
      </div>
    `;
  });

  renderPagination();
}

function renderPagination() {
  const pages = Math.ceil(filteredLessons.length / pageSize);
  const p = document.getElementById("pagination");
  p.innerHTML = "";
  for (let i = 1; i <= pages; i++) {
    p.innerHTML += `
      <button class="page-btn ${i === currentPage ? "active" : ""}"
        onclick="goPage(${i})">${i}</button>`;
  }
}

function goPage(p) {
  currentPage = p;
  render();
}

/* ===== é è¦½ ===== */
function openPreview(id) {
  const l = lessons[id];
  document.getElementById("modalTitle").innerText = l.title;
  document.getElementById("modalMeta").innerText = l.meta;
  fill("modalWarmup", l.warmup);
  fill("modalReading", l.reading);
  fill("modalDiscussion", l.discussion);
  fill("modalVocab", l.vocab.slice(0,10));
  document.getElementById("readFullBtn").onclick = () =>
    window.open(l.fullUrl, "_blank");
  document.getElementById("previewModal").style.display = "flex";
}

function fill(id, arr) {
  const ul = document.getElementById(id);
  ul.innerHTML = "";
  arr.forEach(i => ul.innerHTML += `<li>${i}</li>`);
}

function closePreview() {
  document.getElementById("previewModal").style.display = "none";
}

/* åˆå§‹åŒ– */
render();
</script>

</body>
</html>
